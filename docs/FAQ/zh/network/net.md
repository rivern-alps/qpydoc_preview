# 注网拨号常见问题

### **网络附着被拒的原因排查**

- 当报错为 "No suitable cells in tracking area"，可能卡已欠费，或偶尔的网络异常。

- 当报错为 "EPS services not allowed in this PLMN"，可能驻留到归属运营商外的网络。

- 当报错为 "Tracking area not allowed"，可能小区不允许 UE 漫游驻留。

- 当报错为 "illegal UE or illegal ME"，可能是模组的 IMEI 不正确导致的，或者非法终端。

### **PDN 激活被拒的原因排查**

- 当报错为 "missing or unknown APN"，PDN 激活请求中配置的 APN 不正确导致的。

- 当报错为 "requested service option not subscribed"，网络不支持该类型的 PDN 激活请求，或者是 UE 没有订阅该业务。例如 SIM 没有开通 VoLTE 业务，但是发起了 VoLTE PDN 激活请求。

- 当报错为 "multiple PDN connections for a given APN not allowed"，网络只支持单个默认承载存在，不支持多承载。

### <span id="label1">**自动模式下，如果LTE，3G，2G没有找到网络后，模组的处理逻辑是什么，比 如时间间隔，尝试次数？**</span>

- 场景1：从注网状态掉网，进入无覆盖区或无信号，这时会进入OOS阶段(out of service)

    我们的策略是 第一阶段每30秒搜一次网， 共10次; 如果第一阶段没有注网成功，进入第二阶段，每45秒搜一次网，共10次; 如果第二阶段没有注网成功，进入第三阶段，每60秒搜一次网，一直进行下去。 

- 场景2：开机搜网

    模块开机后会生成一个可用 PLMN + RAT(制式，即4G、3G、2G)列表，然后根据列表依次搜网注网，如果将可用PLMN 列表全部搜完还没有注上网，就会进入 limited service 状态(即为了使 用紧急呼叫，驻留网络)

### **锁定网络模式后的搜网机制和自动模式下是否一样？**

这2种模式，最终影响的是可用 PLMN + RAT（制式，即4G、3G、2G）列表的内容，确认完 PLMN 和 RAT 后，2种模式后续找网流程（Attach 过程）是一样的，没有差异。

### **模组联网成功后，如果突然断网（LTE和3G ），此时模组的处理逻辑是什么？**

在有信号情况下，跟开机搜网注网逻辑一样，类似<a href="#label1">该问题</a>的场景2。

### **模组注册3G网络成功后，会去搜索LTE，这个时间间隔是多少，会尝试多少次？**

在模块注册上3G后，想从3G回到LTE，可通过小区重选和小区切换2种方式。

小区重选的逻辑如下：

- RRC idle 态：3G基站下发的系统消息(SIBs)中会包含邻区信息，比如可能包含2G、3G、4G邻区信息/组合。

    在达到测量门槛后，终端会对LTE邻区进行测量。在满足S准则和R准则后(主要根据小区优先级、信号质 量来决策重选到哪个邻区)，会重选到LTE邻区。

    所以，如果3G的系统消息中要是没有LTE邻区信息; 或者有但是不满足S准则+R准则，终端依旧不会重选 到LTE。

    3G基站下发系统消息的时间策略是由其自身决定的，模块是被动接受。

    通常情况下，模块对服务小区和邻区的监测测量是一直存在的，其目的是为了保障设备的移动性(终 端需要一直感知网络，要保障能接收网络提供的服务，不要出现脱网情况)。

- RRC 连接态：如果3G基站给终端下发了LTE邻区测量指示(通过Measurement Control信令，里面包含指示测量的LTE邻区频点等信息)，终端在完成测量和上报测量报告后，3G基站会决策让终端切换到哪 个邻区。

    如果3G基站不下发LTE邻区测量指示，终端将永远留在3G，不切换到LTE。

> RRC一直处于连接态的情况，一般出现在一直做业务（比如一直在传数据）一刻不停的情况下。

### **无法注册网络、注册网络慢、无法附着网络、附着网络慢的原因排查**

- 调用`sim.getStatus()`方法检查SIM卡是否识别。

- 检查下sim卡是否欠费，流量是否用完【4G模块有一种欠费表现：无法注册4G网络，可以注册2G网络】。【其他情况可以咨询卡商】

- 确认天线是否匹配。

- 检查天线是否连接、天线连接座子的接口是否正确、天线是否损坏【换天线确认】。

- 换卡、换板子对比测试，确保使用正常的硬件和sim卡测试。

- 确保模块支持当地的网络制式：各国网络频段汇总。

- 偏远地区的网络覆盖可能不全，或者产品的天线射频指标不合格，想办法用手机对比测试；用手机对比测试时，注意手机要设置为和模块同样的网络制式，同时借助Cellular-Z工具确认，详情参考：如何判主板的4G/2G信号接收性能的好坏。

- 环境因素（车库、地下室、电梯等）。

- 确认下是否所有设备在同一地点表现是否一致，有可能是伪基站造成的。

- 卡是不是专网卡，是否机卡绑定，专网卡需要设置正确的APN，机卡分离停机需要联系卡商，重新绑定。
